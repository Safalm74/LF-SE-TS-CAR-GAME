var H=Object.defineProperty;var O=(e,t,i)=>t in e?H(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var o=(e,t,i)=>(O(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const h of n)if(h.type==="childList")for(const l of h.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function i(n){const h={};return n.integrity&&(h.integrity=n.integrity),n.referrerPolicy&&(h.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?h.credentials="include":n.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(n){if(n.ep)return;n.ep=!0;const h=i(n);fetch(n.href,h)}})();class f{constructor(t,i){o(this,"x");o(this,"y");this.x=t,this.y=i}}class b{constructor(t,i){o(this,"startingPoint");o(this,"endingPoint");this.startingPoint=t,this.endingPoint=i}draw(t){t.beginPath(),t.moveTo(this.startingPoint.x,this.startingPoint.y),t.lineTo(this.endingPoint.x,this.endingPoint.y),t.stroke(),t.closePath()}}const C=.9*window.innerHeight;let I;window.innerWidth>760?I=.3*window.innerWidth:I=window.innerWidth;const W=3,R=10,x=I/W,T=new f(x*1,0),F=new f(x*1,C),G=new f(x*2,0),_=new f(x*2,C),s={windowHeight:C,windowWidth:I,line:[new b(T,F),new b(G,_)],widthDifference:x,movingInterval:null,offset:R},N="/LF-SE-TS-CAR-GAME/assets/carsSprite-CD-xaeLd.png",L=new Image;L.src=N;const d={rootDiv:document.getElementById("game-container"),inGame:!1,carsSprite:L};d.rootDiv&&(d.rootDiv.style.height="100vh",d.rootDiv.style.width="100%");const q=.4*s.widthDifference,E=200,P=.3*s.widthDifference,m={position:new f(s.widthDifference*1+P,s.windowHeight-E-P),width:q,height:E,positionIndex:1,offset:P,movingInterval:null,playerScore:0};class k{constructor(t,i,r,n){o(this,"width");o(this,"height");o(this,"x");o(this,"y");this.x=t,this.y=i,this.width=r,this.height=n}draw(t){t.strokeRect(this.x,this.y,this.width,this.height)}}const p={police:{x:382,y:30,width:56,height:159},van:{x:60,y:30,width:67,height:160}};class ${constructor(t,i,r,n=1){o(this,"position");o(this,"width");o(this,"height");o(this,"body");o(this,"positionIndex");o(this,"score");this.position=t,this.width=i,this.height=r,this.body=new k(this.position.x,this.position.y,this.width,this.height),this.positionIndex=n,this.score=0}draw(t){this.width=p.police.width,this.height=p.police.height,t.drawImage(d.carsSprite,p.police.x,p.police.y,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}move(t,i,r){const n=this.position.x;let h;t?this.positionIndex>0&&this.positionIndex--:this.positionIndex<2&&this.positionIndex++;const l=i*this.positionIndex+r;l>n?h=1:h=-1,s.movingInterval=setInterval(()=>{this.position.x+=h,this.update(),this.position.x*h>l*h&&clearInterval(s.movingInterval)},2)}update(){this.body.x=this.position.x}checkCollision(t){t.forEach(i=>{i.position.y+i.height>=this.position.y&&i.position.x+i.width>=this.position.x&&i.position.x+i.width<=this.position.x+i.width+this.width&&console.log("colide")})}}const z={truck:{height:300,speed:13},car:{height:200,speed:8}},B=.4*s.widthDifference,g={position:new f(0,0),width:B,vtyp:z};class K{constructor(t,i,r,n,h){o(this,"position");o(this,"width");o(this,"height");o(this,"body");o(this,"speed");o(this,"positionIndex");this.position=t,this.width=i,this.height=r,this.body=new k(this.position.x,this.position.y,this.width,this.height),this.speed=n,this.positionIndex=h}draw(t){this.width=p.van.width,this.height=p.van.height,t.drawImage(d.carsSprite,p.van.x,p.van.y,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}move(){this.position.y+=this.speed}update(){this.move(),this.body.y=this.position.y}}function D(e,t){const i=Math.ceil(e),r=Math.floor(t);return Math.floor(Math.random()*(r-i+1)+i)}const V="/LF-SE-TS-CAR-GAME/assets/coins-removebg-preview-C9kY_nwS.png",M=new Image;M.src=V;const a={coinsImage:M,x:6,y:11,width:48,height:48,spriteNumbers:6};class Y{constructor(t,i,r,n,h,l){o(this,"position");o(this,"width");o(this,"height");o(this,"speed");o(this,"positionIndex");o(this,"animationIndex");this.position=t,this.width=i,this.height=r,this.speed=n,this.positionIndex=h,this.animationIndex=l}draw(t){this.width=a.width,this.height=a.height,t.drawImage(a.coinsImage,a.x+a.width,a.y,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}move(){this.position.y+=this.speed}update(){this.move()}}const u=document.createElement("canvas"),S=document.createElement("h1"),c=new $(m.position,m.width,m.height);d.rootDiv&&(d.rootDiv.innerHTML="",d.rootDiv.appendChild(S),d.rootDiv.appendChild(u));const y=u.getContext("2d");let w=[],v=[];function J(){let e;e=D(0,2);for(let r=0;r<10&&(e=D(0,2),w.filter(n=>n.positionIndex===e).length!==0);r++);const t="truck";c.score>10&&(g.vtyp[t].speed+=Math.exp(-c.score/10)*2);const i=new K(new f(e*s.widthDifference+m.offset,-g.vtyp[t].height),g.width,g.vtyp[t].height,g.vtyp[t].speed,e);w.push(i)}function Q(){let e;e=D(0,2);for(let i=0;i<10&&(e=D(0,2),w.filter(r=>r.positionIndex===e).length!==0);i++);const t=new Y(new f(e*s.widthDifference+m.offset,-a.height),a.width,a.height,g.vtyp.truck.speed,e,0);v.push(t)}setInterval(()=>{w.length<3&&J(),v.length<5&&Q(),w=w.filter(e=>e.position.y<s.windowHeight?!0:(c.score++,!1)),v=v.filter(e=>e.position.y<s.windowHeight?!0:(c.score++,!1))},g.vtyp.truck.speed*76);function A(){y.clearRect(0,0,s.windowWidth,s.windowHeight),s.line.forEach(e=>{e.draw(y)}),w.forEach(e=>{e.update(),e.draw(y)}),v.forEach(e=>{e.update(),e.draw(y)}),c.update(),c.draw(y),c.checkCollision(w),S.innerHTML=`score: ${c.score}`,requestAnimationFrame(A)}function U(){d.inGame=!0;const e=s.windowWidth,t=s.windowHeight;u.width=e,u.height=t,u.style.display="block",u.style.margin="0 auto",u.style.backgroundColor="#ddd",window.addEventListener("keypress",i=>{if(d.inGame)switch(i.key){case"a":clearInterval(s.movingInterval),c.move(!0,s.widthDifference,m.offset);break;case"d":clearInterval(s.movingInterval),c.move(!1,s.widthDifference,m.offset);break}}),c.body.draw(y);for(let i=0;i<s.line.length;i++)s.line[i].draw(y);A()}U();

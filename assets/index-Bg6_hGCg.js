var S=Object.defineProperty;var A=(i,t,e)=>t in i?S(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var h=(i,t,e)=>(A(i,typeof t!="symbol"?t+"":t,e),e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&n(p)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();const T="/LF-SE-TS-CAR-GAME/assets/carsSprite-CD-xaeLd.png",M=new Image;M.src=T;const a={rootDiv:document.getElementById("game-container"),inGame:!1,carsSprite:M};a.rootDiv&&(a.rootDiv.style.height="100vh",a.rootDiv.style.width="100%");class u{constructor(t,e){h(this,"x");h(this,"y");this.x=t,this.y=e}}class L{constructor(t,e){h(this,"startingPoint");h(this,"endingPoint");this.startingPoint=t,this.endingPoint=e}draw(t){t.beginPath(),t.moveTo(this.startingPoint.x,this.startingPoint.y),t.lineTo(this.endingPoint.x,this.endingPoint.y),t.stroke(),t.closePath()}}const P=.9*window.innerHeight;let I;window.innerWidth>760?I=.3*window.innerWidth:I=window.innerWidth;const G=3,O=10,x=I/G,W=new u(x*1,0),N=new u(x*1,P),R=new u(x*2,0),F=new u(x*2,P),o={windowHeight:P,windowWidth:I,line:[new L(W,N),new L(R,F)],widthDifference:x,movingInterval:null,offset:O},_=.4*o.widthDifference,k=200,C=.3*o.widthDifference,l={position:new u(o.widthDifference*1+C,o.windowHeight-k-C),width:_,height:k,positionIndex:1,offset:C,movingInterval:null,playerScore:0},q={truck:{height:300,speed:13},car:{height:200,speed:8}},B=.4*o.widthDifference,m={position:new u(0,0),width:B,vtyp:q},f={police:{x:382,y:30,width:56,height:159},van:{x:60,y:30,width:67,height:160}};class ${constructor(t,e,n,s,r){h(this,"position");h(this,"width");h(this,"height");h(this,"speed");h(this,"positionIndex");this.position=t,this.width=e,this.height=n,this.speed=s,this.positionIndex=r}draw(t){this.width=f.van.width,this.height=f.van.height,t.drawImage(a.carsSprite,f.van.x,f.van.y,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}move(){this.position.y+=this.speed}update(){this.move()}}function D(i,t){const e=Math.ceil(i),n=Math.floor(t);return Math.floor(Math.random()*(n-e+1)+e)}const z="/LF-SE-TS-CAR-GAME/assets/coins-removebg-preview-C9kY_nwS.png",H=new Image;H.src=z;const c={coinsImage:H,x:6,y:11,width:48,height:48,spriteNumbers:6};class K{constructor(t,e,n,s,r,p){h(this,"position");h(this,"width");h(this,"height");h(this,"speed");h(this,"positionIndex");h(this,"animationIndex");this.position=t,this.width=e,this.height=n,this.speed=s,this.positionIndex=r,this.animationIndex=p}draw(t){this.width=c.width,this.height=c.height,t.drawImage(c.coinsImage,c.x+c.width,c.y,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}move(){this.position.y+=this.speed}update(){this.move()}hide(){this.position.y=o.windowHeight}}class V{constructor(t,e,n,s){h(this,"width");h(this,"height");h(this,"x");h(this,"y");this.x=t,this.y=e,this.width=n,this.height=s}draw(t){t.strokeRect(this.x,this.y,this.width,this.height)}}class X{constructor(t,e,n,s=1){h(this,"position");h(this,"width");h(this,"height");h(this,"body");h(this,"positionIndex");h(this,"score");this.position=t,this.width=e,this.height=n,this.body=new V(this.position.x,this.position.y,this.width,this.height),this.positionIndex=s,this.score=0}draw(t){this.width=f.police.width,this.height=f.police.height,t.drawImage(a.carsSprite,f.police.x,f.police.y,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}move(t,e,n){const s=this.position.x;let r;t?this.positionIndex>0&&this.positionIndex--:this.positionIndex<2&&this.positionIndex++;const p=e*this.positionIndex+n;p>s?r=1:r=-1,o.movingInterval=setInterval(()=>{this.position.x+=r,this.update(),this.position.x*r>p*r&&clearInterval(o.movingInterval)},2)}update(){this.body.x=this.position.x}checkCollision(t,e){t.forEach(n=>{document.body.style.backgroundColor="white",n.position.y+n.height>=this.position.y&&n.position.y>=this.position.y+this.height&&n.position.x+n.width>=this.position.x&&n.position.x+n.width<=this.position.x+n.width+this.width&&(document.body.style.backgroundColor="red",console.log("colide"))}),e.forEach(n=>{n.position.y+n.height>=this.position.y&&n.position.x+n.width>=this.position.x&&n.position.x+n.width<=this.position.x+n.width+this.width&&(n.hide(),this.score+=10)})}}const d=new X(l.position,l.width,l.height),w=document.createElement("canvas"),E=document.createElement("h1");E.style.backgroundColor="wheat";function Y(){a.rootDiv&&(a.rootDiv.innerHTML="",a.rootDiv.appendChild(E),a.rootDiv.appendChild(w))}const y=w.getContext("2d");let g=[],v=[];function J(){let i;i=D(0,2);for(let n=0;n<10&&(i=D(0,2),g.filter(s=>s.positionIndex===i).length!==0);n++);const t="truck";d.score>10&&(m.vtyp[t].speed+=Math.exp(-d.score/10)*3);const e=new $(new u(i*o.widthDifference+l.offset,-m.vtyp[t].height),m.width,m.vtyp[t].height,m.vtyp[t].speed,i);g.push(e)}function Q(){let i;i=D(0,2);for(let e=0;e<10&&(i=D(0,2),g.filter(n=>n.positionIndex===i).length!==0);e++);const t=new K(new u(i*o.widthDifference+l.offset,-c.height),c.width,c.height,m.vtyp.truck.speed,i,0);v.push(t)}setInterval(()=>{g.length<3&&J(),v.length<5&&Q(),g=g.filter(i=>i.position.y<o.windowHeight?!0:(d.score++,!1)),v=v.filter(i=>i.position.y<o.windowHeight?!0:(d.score++,!1))},m.vtyp.truck.speed*76+500);function b(){y.clearRect(0,0,o.windowWidth,o.windowHeight),o.line.forEach(i=>{i.draw(y)}),g.forEach(i=>{i.update(),i.draw(y)}),v.forEach(i=>{i.update(),i.draw(y)}),d.update(),d.draw(y),d.checkCollision(g,v),E.innerHTML=`score: ${d.score}`,a.inGame&&requestAnimationFrame(b)}function U(){a.rootDiv&&(a.rootDiv.innerHTML=""),Y(),a.inGame=!0;const i=o.windowWidth,t=o.windowHeight;w.width=i,w.height=t,w.style.display="block",w.style.margin="0 auto",w.style.backgroundColor="rgba(125,125,125,0.9)",w.addEventListener("click",e=>{e.offsetX<o.windowWidth/2?(clearInterval(o.movingInterval),d.move(!0,o.widthDifference,l.offset)):(clearInterval(o.movingInterval),d.move(!1,o.widthDifference,l.offset))}),window.addEventListener("keypress",e=>{if(a.inGame)switch(e.key){case"a":clearInterval(o.movingInterval),d.move(!0,o.widthDifference,l.offset);break;case"d":clearInterval(o.movingInterval),d.move(!1,o.widthDifference,l.offset);break}}),d.body.draw(y);for(let e=0;e<o.line.length;e++)o.line[e].draw(y);b()}function Z(){if(a.rootDiv){a.rootDiv.innerHTML="";const i=document.createElement("div");i.style.display="flex",i.style.height="100vh",i.style.width="100%",i.style.justifyContent="center",i.style.alignItems="center",i.style.position="relative",i.className="home-page";const t=document.createElement("button");t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%,-50%)",t.value="Start Game",t.innerHTML="Start Game",t.className="start-btn",t.addEventListener("click",()=>{U(),a.inGame=!0});const e=document.createElement("p");e.innerHTML=`Press'w' or click of left &nbsp 
                                side to move left And`,i.appendChild(t),a.rootDiv.appendChild(i)}}Z();

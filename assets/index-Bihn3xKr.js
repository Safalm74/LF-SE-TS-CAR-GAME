var G=Object.defineProperty;var A=(e,t,i)=>t in e?G(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var r=(e,t,i)=>(A(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const w of a.addedNodes)w.tagName==="LINK"&&w.rel==="modulepreload"&&n(w)}).observe(document,{childList:!0,subtree:!0});function i(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(o){if(o.ep)return;o.ep=!0;const a=i(o);fetch(o.href,a)}})();const T="/LF-SE-TS-CAR-GAME/assets/carsSprite-CD-xaeLd.png",P=new Image;P.src=T;const h={rootDiv:document.getElementById("game-container"),inGame:!1,carsSprite:P};h.rootDiv&&(h.rootDiv.style.height="100vh",h.rootDiv.style.width="100%");class m{constructor(t,i){r(this,"x");r(this,"y");this.x=t,this.y=i}}class L{constructor(t,i){r(this,"startingPoint");r(this,"endingPoint");this.startingPoint=t,this.endingPoint=i}draw(t){t.beginPath(),t.moveTo(this.startingPoint.x,this.startingPoint.y),t.lineTo(this.endingPoint.x,this.endingPoint.y),t.stroke(),t.closePath()}}const E=.9*window.innerHeight;let I;window.innerWidth>760?I=.3*window.innerWidth:I=window.innerWidth;const O=3,W=10,x=I/O,R=new m(x*1,0),N=new m(x*1,E),F=new m(x*2,0),_=new m(x*2,E),s={windowHeight:E,windowWidth:I,line:[new L(R,N),new L(F,_)],widthDifference:x,movingInterval:null,offset:W},$=.4*s.widthDifference,H=200,D=.3*s.widthDifference,c={position:new m(s.widthDifference*1+D,s.windowHeight-H-D),width:$,height:H,positionIndex:1,offset:D,movingInterval:null,playerScore:0},B={truck:{height:300,speed:13},car:{height:200,speed:8}},q=.4*s.widthDifference,u={position:new m(0,0),width:q,vtyp:B},g={police:{x:382,y:30,width:56,height:159},van:{x:60,y:30,width:67,height:160}};class V{constructor(t,i,n,o,a){r(this,"position");r(this,"width");r(this,"height");r(this,"speed");r(this,"positionIndex");this.position=t,this.width=i,this.height=n,this.speed=o,this.positionIndex=a}draw(t){this.width=g.van.width,this.height=g.van.height,t.drawImage(h.carsSprite,g.van.x,g.van.y,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}move(){this.position.y+=this.speed}update(){this.move()}}function C(e,t){const i=Math.ceil(e),n=Math.floor(t);return Math.floor(Math.random()*(n-i+1)+i)}const z="/LF-SE-TS-CAR-GAME/assets/coins-removebg-preview-C9kY_nwS.png",b=new Image;b.src=z;const l={coinsImage:b,x:6,y:11,width:48,height:48,spriteNumbers:6};class K{constructor(t,i,n,o,a,w){r(this,"position");r(this,"width");r(this,"height");r(this,"speed");r(this,"positionIndex");r(this,"animationIndex");this.position=t,this.width=i,this.height=n,this.speed=o,this.positionIndex=a,this.animationIndex=w}draw(t){this.width=l.width,this.height=l.height,t.drawImage(l.coinsImage,l.x+l.width,l.y,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}move(){this.position.y+=this.speed}update(){this.move()}hide(){this.position.y=s.windowHeight}}class X{constructor(t,i,n,o){r(this,"width");r(this,"height");r(this,"x");r(this,"y");this.x=t,this.y=i,this.width=n,this.height=o}draw(t){t.strokeRect(this.x,this.y,this.width,this.height)}}function Y(e){const t=document.createElement("div");t.style.width=`${window.innerWidth*.2}px`,t.style.height=`${window.innerWidth*.2}px`,t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%,-50%)",t.style.textAlign="center",t.style.backgroundColor="#eee",t.style.boxShadow="0 .2rem 1.2rem .2rem rgba(20,20,20,0.3)",t.style.borderRadius="5px";const i=document.createElement("h1");i.innerHTML="GAME OVER";const n=document.createElement("h1");n.innerHTML=`Score:${e}`;const o=document.createElement("button");o.value="Go Home",o.innerHTML="Go Home",o.addEventListener("click",()=>{S()}),t.appendChild(i),t.appendChild(n),t.appendChild(o),h.rootDiv&&(h.rootDiv.appendChild(t),Q(),console.log(d))}class J{constructor(t,i,n,o=1){r(this,"position");r(this,"width");r(this,"height");r(this,"body");r(this,"positionIndex");r(this,"score");this.position=t,this.width=i,this.height=n,this.body=new X(this.position.x,this.position.y,this.width,this.height),this.positionIndex=o,this.score=0}draw(t){this.width=g.police.width,this.height=g.police.height,t.drawImage(h.carsSprite,g.police.x,g.police.y,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}move(t,i,n){const o=this.position.x;let a;t?this.positionIndex>0&&this.positionIndex--:this.positionIndex<2&&this.positionIndex++;const w=i*this.positionIndex+n;w>o?a=1:a=-1,s.movingInterval=setInterval(()=>{this.position.x+=a,this.update(),this.position.x*a>w*a&&clearInterval(s.movingInterval)},2)}update(){this.body.x=this.position.x}checkCollision(t,i){t.forEach(n=>{document.body.style.backgroundColor="white",n.position.y+n.height>=this.position.y&&n.position.y<=this.position.y+this.height&&n.position.x+n.width>=this.position.x&&n.position.x+n.width<=this.position.x+n.width+this.width&&(h.inGame=!1,document.body.style.backgroundColor="red",Y(this.score))}),i.forEach(n=>{n.position.y+n.height>=this.position.y&&n.position.x+n.width>=this.position.x&&n.position.x+n.width<=this.position.x+n.width+this.width&&(n.hide(),this.score+=10)})}}function Q(){d.positionIndex=c.positionIndex,d.score=c.playerScore}const d=new J(c.position,c.width,c.height),f=document.createElement("canvas"),M=document.createElement("h1");M.style.backgroundColor="wheat";function U(){h.rootDiv&&(h.rootDiv.innerHTML="",h.rootDiv.appendChild(M),h.rootDiv.appendChild(f))}const y=f.getContext("2d");let p=[],v=[];function Z(){let e;e=C(0,2);for(let n=0;n<10&&(e=C(0,2),p.filter(o=>o.positionIndex===e).length!==0);n++);const t="truck";d.score>10&&(u.vtyp[t].speed+=Math.exp(-d.score/10)*3);const i=new V(new m(e*s.widthDifference+c.offset,-u.vtyp[t].height),u.width,u.vtyp[t].height,u.vtyp[t].speed,e);p.push(i)}function j(){let e;e=C(0,2);for(let i=0;i<10&&(e=C(0,2),p.filter(n=>n.positionIndex===e).length!==0);i++);const t=new K(new m(e*s.widthDifference+c.offset,-l.height),l.width,l.height,u.vtyp.truck.speed,e,0);v.push(t)}setInterval(()=>{p.length<3&&Z(),v.length<5&&j(),p=p.filter(e=>e.position.y<s.windowHeight?!0:(d.score++,!1)),v=v.filter(e=>e.position.y<s.windowHeight?!0:(d.score++,!1))},u.vtyp.truck.speed*76+500);function k(){console.log("then in gameloop",h.inGame),y.clearRect(0,0,s.windowWidth,s.windowHeight),s.line.forEach(e=>{e.draw(y)}),p.forEach(e=>{e.update(),e.draw(y)}),v.forEach(e=>{e.update(),e.draw(y)}),d.update(),d.draw(y),d.checkCollision(p,v),M.innerHTML=`score: ${d.score}`,h.inGame?requestAnimationFrame(k):(p=[],v=[])}function tt(){h.rootDiv&&(h.rootDiv.innerHTML=""),U(),console.log("here"),h.inGame=!0;const e=s.windowWidth,t=s.windowHeight;f.width=e,f.height=t,f.style.display="block",f.style.margin="0 auto",f.style.backgroundColor="rgba(125,125,125,0.9)",f.addEventListener("click",i=>{i.offsetX<s.windowWidth/2?(clearInterval(s.movingInterval),d.move(!0,s.widthDifference,c.offset)):(clearInterval(s.movingInterval),d.move(!1,s.widthDifference,c.offset))}),window.addEventListener("keypress",i=>{if(h.inGame)switch(i.key){case"a":clearInterval(s.movingInterval),d.move(!0,s.widthDifference,c.offset);break;case"d":clearInterval(s.movingInterval),d.move(!1,s.widthDifference,c.offset);break}}),d.body.draw(y);for(let i=0;i<s.line.length;i++)s.line[i].draw(y);k()}function S(){if(h.rootDiv){h.rootDiv.innerHTML="";const e=document.createElement("div");e.style.display="flex",e.style.height="100vh",e.style.width="100%",e.style.justifyContent="center",e.style.alignItems="center",e.style.position="relative",e.className="home-page";const t=document.createElement("button");t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%,-50%)",t.value="Start Game",t.innerHTML="Start Game",t.className="start-btn",t.addEventListener("click",()=>{tt(),h.inGame=!0});const i=document.createElement("p");i.innerHTML=`Press'w' or click of left &nbsp 
                                side to move left And`,e.appendChild(t),h.rootDiv.appendChild(e)}}S();

var k=Object.defineProperty;var L=(e,t,i)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var s=(e,t,i)=>(L(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))h(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&h(f)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();class l{constructor(t,i){s(this,"x");s(this,"y");this.x=t,this.y=i}}class x{constructor(t,i){s(this,"startingPoint");s(this,"endingPoint");this.startingPoint=t,this.endingPoint=i}draw(t){t.beginPath(),t.moveTo(this.startingPoint.x,this.startingPoint.y),t.lineTo(this.endingPoint.x,this.endingPoint.y),t.stroke(),t.closePath()}}const m=.9*window.innerHeight,b=.8*window.innerWidth,H=3,M=10,u=b/H,O=new l(u*1,0),E=new l(u*1,m),W=new l(u*2,0),A=new l(u*2,m),o={windowHeight:m,windowWidth:b,line:[new x(O,E),new x(W,A)],widthDifference:u,movingInterval:null,offset:M},d={rootDiv:document.getElementById("game-container"),inGame:!1};d.rootDiv&&(d.rootDiv.style.height="100vh",d.rootDiv.style.width="100%");const R=.4*o.widthDifference,I=200,v=.3*o.widthDifference,w={position:new l(o.widthDifference*1+v,o.windowHeight-I-v),width:R,height:I,positionIndex:1,offset:v,movingInterval:null};class D{constructor(t,i,h,n){s(this,"width");s(this,"height");s(this,"x");s(this,"y");this.x=t,this.y=i,this.width=h,this.height=n}draw(t){t.strokeRect(this.x,this.y,this.width,this.height)}}class _{constructor(t,i,h,n=1){s(this,"position");s(this,"width");s(this,"height");s(this,"body");s(this,"positionIndex");this.position=t,this.width=i,this.height=h,this.body=new D(this.position.x,this.position.y,this.width,this.height),this.positionIndex=n}move(t,i,h){const n=this.position.x;let r;t?this.positionIndex>0&&this.positionIndex--:this.positionIndex<2&&this.positionIndex++;const f=i*this.positionIndex+h;f>n?r=1:r=-1,o.movingInterval=setInterval(()=>{this.position.x+=r,this.update(),this.position.x*r>f*r&&clearInterval(o.movingInterval)},2)}update(){this.body.x=this.position.x}checkCollision(t){t.forEach(i=>{i.position.y+i.height>=this.position.y&&i.position.x+i.width>=this.position.x&&i.position.x+i.width<=this.position.x+i.width+this.width&&console.log("colide")})}}const F={truck:{height:300,speed:15},car:{height:200,speed:8}},G=.4*o.widthDifference,y={position:new l(0,0),width:G,vtyp:F};class N{constructor(t,i,h,n,r){s(this,"position");s(this,"width");s(this,"height");s(this,"body");s(this,"speed");s(this,"positionIndex");this.position=t,this.width=i,this.height=h,this.body=new D(this.position.x,this.position.y,this.width,this.height),this.speed=n,this.positionIndex=r}move(){this.position.y+=this.speed}update(){this.move(),this.body.y=this.position.y}}function P(e,t){const i=Math.ceil(e),h=Math.floor(t);return Math.floor(Math.random()*(h-i+1)+i)}const c=document.createElement("canvas");d.rootDiv&&(d.rootDiv.innerHTML="",d.rootDiv.appendChild(c));const p=c.getContext("2d"),g=new _(w.position,w.width,w.height);let a=[];function T(){let e;e=P(0,2);for(let h=0;h<10&&(e=P(0,2),a.filter(n=>n.positionIndex===e).length!==0);h++);const t="truck",i=new N(new l(e*o.widthDifference+w.offset,-y.vtyp[t].height),y.width,y.vtyp[t].height,y.vtyp[t].speed,e);a.push(i)}setInterval(()=>{a.length<3&&T(),a=a.filter(e=>e.position.y<o.windowHeight)},1e3);function C(){p.clearRect(0,0,o.windowWidth,o.windowHeight),a.forEach(e=>{e.update(),e.body.draw(p),g.update(),g.body.draw(p)}),g.checkCollision(a);for(let e=0;e<o.line.length;e++)o.line[e].draw(p);requestAnimationFrame(C)}function q(){d.inGame=!0;const e=o.windowWidth,t=o.windowHeight;c.width=e,c.height=t,c.style.display="block",c.style.margin="0 auto",c.style.backgroundColor="#ddd",window.addEventListener("keypress",i=>{if(d.inGame)switch(i.key){case"a":clearInterval(o.movingInterval),g.move(!0,o.widthDifference,w.offset);break;case"d":clearInterval(o.movingInterval),g.move(!1,o.widthDifference,w.offset);break;case"s":clearInterval(o.movingInterval);break}}),g.body.draw(p);for(let i=0;i<o.line.length;i++)o.line[i].draw(p);C()}q();

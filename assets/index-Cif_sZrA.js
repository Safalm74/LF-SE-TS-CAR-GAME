var k=Object.defineProperty;var L=(e,t,i)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var s=(e,t,i)=>(L(e,typeof t!="symbol"?t+"":t,i),i);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const h of n)if(h.type==="childList")for(const u of h.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function i(n){const h={};return n.integrity&&(h.integrity=n.integrity),n.referrerPolicy&&(h.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?h.credentials="include":n.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(n){if(n.ep)return;n.ep=!0;const h=i(n);fetch(n.href,h)}})();class l{constructor(t,i){s(this,"x");s(this,"y");this.x=t,this.y=i}}class x{constructor(t,i){s(this,"startingPoint");s(this,"endingPoint");this.startingPoint=t,this.endingPoint=i}draw(t){t.beginPath(),t.moveTo(this.startingPoint.x,this.startingPoint.y),t.lineTo(this.endingPoint.x,this.endingPoint.y),t.stroke(),t.closePath()}}const m=.9*window.innerHeight,b=.8*window.innerWidth,H=3,M=10,g=b/H,O=new l(g*1,0),W=new l(g*1,m),E=new l(g*2,0),A=new l(g*2,m),o={windowHeight:m,windowWidth:b,line:[new x(O,W),new x(E,A)],widthDifference:g,movingInterval:null,offset:M},d={rootDiv:document.getElementById("game-container"),inGame:!1};d.rootDiv&&(d.rootDiv.style.height="100vh",d.rootDiv.style.width="100%");const R=.4*o.widthDifference,I=200,v=.3*o.widthDifference,p={position:new l(o.widthDifference*1+v,o.windowHeight-I-v),width:R,height:I,positionIndex:1,offset:v,movingInterval:null};class D{constructor(t,i,r,n){s(this,"width");s(this,"height");s(this,"x");s(this,"y");this.x=t,this.y=i,this.width=r,this.height=n}draw(t){t.strokeRect(this.x,this.y,this.width,this.height)}}class _{constructor(t,i,r,n=1){s(this,"position");s(this,"width");s(this,"height");s(this,"body");s(this,"positionIndex");this.position=t,this.width=i,this.height=r,this.body=new D(this.position.x,this.position.y,this.width,this.height),this.positionIndex=n}move(t,i,r){const n=this.position.x;let h;t?this.positionIndex>0&&this.positionIndex--:this.positionIndex<2&&this.positionIndex++,i*this.positionIndex+r>n?h=1:h=-1,o.movingInterval=setInterval(()=>{this.position.x+=h,this.update(),this.position.x>=o.windowWidth-o.offset-this.width&&(this.position.x=o.windowWidth-o.offset-this.width,clearInterval(o.movingInterval)),this.position.x<=o.offset&&(this.position.x=o.offset,clearInterval(o.movingInterval))},5)}update(){this.body.x=this.position.x}checkCollision(t){t.forEach(i=>{i.position.y+i.height>=this.position.y&&i.position.x+i.width>=this.position.x&&i.position.x+i.width<=this.position.x+i.width+this.width&&console.log("colide")})}}const F={truck:{height:300,speed:15},car:{height:200,speed:8}},G=250,y={position:new l(0,0),width:G,vtyp:F};class N{constructor(t,i,r,n,h){s(this,"position");s(this,"width");s(this,"height");s(this,"body");s(this,"speed");s(this,"positionIndex");this.position=t,this.width=i,this.height=r,this.body=new D(this.position.x,this.position.y,this.width,this.height),this.speed=n,this.positionIndex=h}move(){this.position.y+=this.speed}update(){this.move(),this.body.y=this.position.y}}function P(e,t){const i=Math.ceil(e),r=Math.floor(t);return Math.floor(Math.random()*(r-i+1)+i)}const a=document.createElement("canvas");d.rootDiv&&(d.rootDiv.innerHTML="",d.rootDiv.appendChild(a));const f=a.getContext("2d"),w=new _(p.position,p.width,p.height);let c=[];function T(){let e;e=P(0,2);for(let r=0;r<10&&(e=P(0,2),c.filter(n=>n.positionIndex===e).length!==0);r++);const t="truck",i=new N(new l(e*o.widthDifference+p.offset,-y.vtyp[t].height),y.width,y.vtyp[t].height,y.vtyp[t].speed,e);c.push(i)}setInterval(()=>{c.length<3&&T(),c=c.filter(e=>e.position.y<o.windowHeight)},1e3);function C(){f.clearRect(0,0,o.windowWidth,o.windowHeight),c.forEach(e=>{e.update(),e.body.draw(f),w.update(),w.body.draw(f)}),w.checkCollision(c);for(let e=0;e<o.line.length;e++)o.line[e].draw(f);requestAnimationFrame(C)}function q(){d.inGame=!0;const e=o.windowWidth,t=o.windowHeight;a.width=e,a.height=t,a.style.display="block",a.style.margin="0 auto",a.style.backgroundColor="#ddd",window.addEventListener("keypress",i=>{if(d.inGame)switch(i.key){case"a":clearInterval(o.movingInterval),w.move(!0,o.widthDifference,p.offset);break;case"d":clearInterval(o.movingInterval),w.move(!1,o.widthDifference,p.offset);break;case"s":clearInterval(o.movingInterval);break}}),w.body.draw(f);for(let i=0;i<o.line.length;i++)o.line[i].draw(f);C()}q();
